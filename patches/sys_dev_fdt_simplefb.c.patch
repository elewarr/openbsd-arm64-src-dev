Index: sys/dev/fdt/simplefb.c
===================================================================
RCS file: /cvs/src/sys/dev/fdt/simplefb.c,v
retrieving revision 1.5
diff -u -p -r1.5 simplefb.c
--- sys/dev/fdt/simplefb.c	27 Aug 2018 09:30:07 -0000	1.5
+++ sys/dev/fdt/simplefb.c	9 Aug 2019 22:27:28 -0000
@@ -70,6 +70,7 @@ struct simplefb_softc {
 	struct simplefb_format	*sc_format;
 	paddr_t			sc_paddr;
 	psize_t			sc_psize;
+	void			(*simplefb_write_cmd)(u_long, caddr_t);
 };
 
 struct rasops_info simplefb_ri;
@@ -230,9 +231,36 @@ int
 simplefb_wsioctl(void *v, u_long cmd, caddr_t data, int flag, struct proc *p)
 {
 	struct rasops_info *ri = v;
+	struct simplefb_softc *sc = ri->ri_hw;
+	struct wsdisplay_param *dp = (struct wsdisplay_param *)data;
 	struct wsdisplay_fbinfo	*wdf;
 
 	switch (cmd) {
+	case WSDISPLAYIO_GETPARAM:
+		switch (dp->param) {
+		case WSDISPLAYIO_PARAM_BRIGHTNESS:
+			dp->min = 0;
+			dp->max = 255;
+			dp->curval = 255;
+			printf("get\n");
+			break;
+		default:
+			return -1;
+		}
+		break;
+	case WSDISPLAYIO_SETPARAM:
+		switch (dp->param) {
+		case WSDISPLAYIO_PARAM_BRIGHTNESS:
+			printf("set\n");
+			if (sc->simplefb_write_cmd) {
+				printf("set really now\n");
+				sc->simplefb_write_cmd(cmd, data);
+			}
+			break;
+		default:
+			return -1;
+		}
+		break;
 	case WSDISPLAYIO_GTYPE:
 		*(int *)data = WSDISPLAY_TYPE_EFIFB;
 		return 0;
